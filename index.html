<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <title>Solfeggio Frequenciesï¼‹Schumann Resonance</title>
    <meta name="robots" content="noindex">
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            padding: 20px;
            user-select: none;
        }

        canvas {
            border: 1px solid #ccc;
            background-color: #1a1a1a;
            /* æš—è‰²åº•åœ– */
            margin-top: 20px;
            cursor: crosshair;
        }

        label,
        select,
        input {
            margin-top: 10px;
            display: block;
        }

        button {
            margin-top: 10px;
            padding: 8px 20px;
        }

        #info {
            margin-top: 10px;
            font-size: 14px;
        }

        #visitorCount {
            margin-top: 20px;
            font-size: 16px;
            color: #2c3e50;
            font-weight: bold;
        }
    </style>
</head>

<body>
    <h2>ğŸ§ Solfeggio Frequenciesï¼‹Schumann Resonance</h2>

    <label>Solfeggio Frequenciesï¼ˆHzï¼‰ï¼š
        <select id="mainFreq">
            <option value="396">396 Hz</option>
            <option value="417">417 Hz</option>
            <option value="528" selected>528 Hz</option>
            <option value="639">639 Hz</option>
            <option value="741">741 Hz</option>
            <option value="852">852 Hz</option>
            <option value="963">963 Hz</option>
        </select>
    </label>

    <label>Schumann Resonanceï¼ˆHzï¼‰ï¼š
        <select id="modFreq">
            <option value="7.83" selected>7.83 Hz</option>
            <option value="10">10 Hz</option>
        </select>
    </label>

    <label>Volumeï¼š
        <input type="range" id="volume" min="0" max="1" step="0.01" value="0.5">
    </label>

    <button onclick="startAudio()">Play</button>
    <button onclick="stopAudio()">Stop</button>

    <canvas id="oscilloscope" width="800" height="300"></canvas>
    <div id="info">Frequency: -- Hz, Amplitude: --%</div>

    <script>
        document.addEventListener('contextmenu', event => event.preventDefault());
        document.onkeydown = function(e) {
            if (e.key === 'F12' || e.key === 'I' && e.ctrlKey || e.key === 'C' && e.ctrlKey || e.key === 'U' && e.ctrlKey) {
                event.preventDefault();
                return false;
            }
        };

        let audioCtx, mainOsc, modOsc, modGain, gainNode, analyser, frequencyData, canvasCtx, animationId;
        const canvas = document.getElementById("oscilloscope");
        const info = document.getElementById("info");
        canvasCtx = canvas.getContext("2d");

        let timePerSample = 0;

        function updateVisitorCount() {
            const deviceFingerprint = navigator.userAgent;
            let count = localStorage.getItem('visitorCount') || 0;
            const lastVisit = localStorage.getItem('lastVisit_' + deviceFingerprint);
            const now = Date.now();

            if (!lastVisit || (now - parseInt(lastVisit) > 86400000)) {
                count = parseInt(count) + 1;
                localStorage.setItem('visitorCount', count);
                localStorage.setItem('lastVisit_' + deviceFingerprint, now);
            }
            document.getElementById("visitorCount").textContent = `Visitï¼š${count} äºº`;
        }

        window.addEventListener('load', updateVisitorCount);

        function startAudio() {
            stopAudio();
            try {
                audioCtx = new(window.AudioContext || window.webkitAudioContext)();
                const freq = parseFloat(document.getElementById("mainFreq").value);
                const modFreq = parseFloat(document.getElementById("modFreq").value);
                const volume = parseFloat(document.getElementById("volume").value);

                mainOsc = audioCtx.createOscillator();
                mainOsc.type = "sine";
                mainOsc.frequency.value = freq;

                modOsc = audioCtx.createOscillator();
                modOsc.type = "sine";
                modOsc.frequency.value = modFreq;

                modGain = audioCtx.createGain();
                modGain.gain.value = 10; // èª¿æ•´ç‚ºé©ä¸­å€¼ï¼Œé¿å…å¤±çœŸ

                modOsc.connect(modGain);
                modGain.connect(mainOsc.frequency);

                gainNode = audioCtx.createGain();
                gainNode.gain.value = volume;

                analyser = audioCtx.createAnalyser();
                analyser.fftSize = 4096; // æé«˜åˆ†è¾¨ç‡
                const bufferLength = analyser.frequencyBinCount;
                frequencyData = new Uint8Array(bufferLength);

                mainOsc.connect(gainNode);
                gainNode.connect(analyser);
                analyser.connect(audioCtx.destination);

                // ç¢ºä¿éŸ³é »åœ¨ç”¨æˆ¶äº’å‹•å¾Œå•Ÿå‹•
                mainOsc.start();
                modOsc.start();

                function draw() {
                    animationId = requestAnimationFrame(draw);
                    analyser.getByteFrequencyData(frequencyData);

                    // æ¸…é™¤ç•«å¸ƒ (æš—è‰²èƒŒæ™¯)
                    canvasCtx.fillStyle = "#1a1a1a"; // æš—è‰²åº•åœ–
                    canvasCtx.fillRect(0, 0, canvas.width, canvas.height);

                    // å®šç¾©é »ç‡ç¯„åœå’Œ bin æ•¸
                    const sampleRate = audioCtx.sampleRate;
                    const freqPerBin = sampleRate / analyser.fftSize;
                    const maxFreq = 1500; // æ¶µè“‹ä¸»é »ç‡å’Œå‰¯é »ç‡å½±éŸ¿
                    const binsToDisplay = Math.min(Math.floor(maxFreq / freqPerBin), bufferLength);

                    // ç¹ªè£½å½©è‰²é »è­œ (ç·šæ€§ç¹ªè£½)
                    canvasCtx.beginPath();

                    for (let i = 0; i < binsToDisplay; i++) {
                        const baseAmplitude = frequencyData[i] / 255;
                        const adjustedAmplitude = baseAmplitude * volume;
                        const x = (i / binsToDisplay) * canvas.width;
                        const y = canvas.height - (adjustedAmplitude * canvas.height);

                        // æ ¹æ“šé »ç‡è¨­ç½®è‰²ç›¸ (hue)ï¼Œæ ¹æ“šæŒ¯å¹…è¨­ç½®äº®åº¦ (lightness)
                        const hue = (i / binsToDisplay) * 360; // é »ç‡ç¯„åœå°æ‡‰ 0-360Â°
                        const lightness = 30 + (adjustedAmplitude * 60); // æŒ¯å¹…å¼·åº¦å½±éŸ¿äº®åº¦ (30%-90%)
                        canvasCtx.strokeStyle = `hsl(${hue}, 70%, ${lightness}%)`; // å›ºå®šé£½å’Œåº¦ 70%

                        if (i === 0) canvasCtx.moveTo(x, y);
                        else canvasCtx.lineTo(x, y);
                    }
                    canvasCtx.lineWidth = 2;
                    canvasCtx.stroke();

                    // ç¹ªè£½æ©«è»¸å’Œç¸±è»¸ (èª¿æ•´ç‚ºç™½è‰²ä»¥å°æ¯”æš—è‰²èƒŒæ™¯)
                    canvasCtx.fillStyle = "#fff"; // ç™½è‰²æ–‡å­—
                    canvasCtx.font = "12px Arial";
                    canvasCtx.textAlign = "center";

                    // æ©«è»¸ (Frequency, Hz)
                    canvasCtx.beginPath();
                    canvasCtx.strokeStyle = "#ccc"; // æ·ºç°è‰²è»¸ç·š
                    canvasCtx.moveTo(0, canvas.height - 10);
                    canvasCtx.lineTo(canvas.width, canvas.height - 10);
                    canvasCtx.stroke();
                    const freqLabels = [0, 250, 500, 750, 1000, 1250, 1500];
                    freqLabels.forEach(freq => {
                        const x = (freq / maxFreq) * canvas.width;
                        canvasCtx.moveTo(x, canvas.height - 10);
                        canvasCtx.lineTo(x, canvas.height - 5);
                        canvasCtx.fillText(`${freq} Hz`, x, canvas.height);
                    });

                    // ç¸±è»¸ (Amplitude, %)
                    canvasCtx.beginPath();
                    canvasCtx.moveTo(10, 0);
                    canvasCtx.lineTo(10, canvas.height);
                    canvasCtx.stroke();
                    const ampLabels = [0, 25, 50, 75, 100];
                    ampLabels.forEach(amp => {
                        const y = canvas.height - (amp / 100) * canvas.height;
                        canvasCtx.moveTo(5, y);
                        canvasCtx.lineTo(10, y);
                        canvasCtx.fillText(`${amp}%`, 0, y + 5);
                    });

                    // æ›´æ–°æ»‘é¼ ä¿¡æ¯
                    canvas.addEventListener("mousemove", function(event) {
                        const rect = canvas.getBoundingClientRect();
                        const x = event.clientX - rect.left;
                        const freqIndex = Math.floor((x / canvas.width) * binsToDisplay);
                        const frequency = freqIndex * freqPerBin;
                        const baseAmplitude = frequencyData[freqIndex] / 255;
                        const adjustedAmplitude = baseAmplitude * volume;
                        info.innerText = `Frequency: ${frequency.toFixed(2)} Hz, Amplitude: ${(adjustedAmplitude * 100).toFixed(2)}%`;
                    }, {
                        passive: true
                    });
                }

                draw();
            } catch (e) {
                console.error("Audio error:", e); // èª¿è©¦ç”¨ï¼Œé¡¯ç¤ºå…·é«”éŒ¯èª¤
                alert("Audio initialization failed, please ensure browser supports Web Audio API.");
            }
        }

        function stopAudio() {
            if (mainOsc) mainOsc.stop();
            if (modOsc) modOsc.stop();
            if (animationId) cancelAnimationFrame(animationId);
            if (audioCtx) audioCtx.close();
            mainOsc = null;
            modOsc = null;
        }
    </script>
</body>



</html>